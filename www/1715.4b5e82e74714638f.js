"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1715],{7691:(P,y,l)=>{l.d(y,{i7:()=>L,LK:()=>c,ru:()=>f});var u=l(7464),d=l(467),f=function(m){return m.Prompt="PROMPT",m.Camera="CAMERA",m.Photos="PHOTOS",m}(f||{}),h=function(m){return m.Rear="REAR",m.Front="FRONT",m}(h||{}),c=function(m){return m.Uri="uri",m.Base64="base64",m.DataUrl="dataUrl",m}(c||{});class v extends u.E_{getPhoto(t){var r=this;return(0,d.A)(function*(){return new Promise(function(){var i=(0,d.A)(function*(n,e){if(t.webUseInput||t.source===f.Photos)r.fileInputExperience(t,n,e);else if(t.source===f.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=t.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",function(){var s=(0,d.A)(function*(o){0===o.detail?r.fileInputExperience(t,n,e):r.cameraExperience(t,n,e)});return function(o){return s.apply(this,arguments)}}())}else r.cameraExperience(t,n,e)});return function(n,e){return i.apply(this,arguments)}}())})()}pickImages(t){var r=this;return(0,d.A)(function*(){return new Promise(function(){var i=(0,d.A)(function*(n,e){r.multipleFileInputExperience(n,e)});return function(n,e){return i.apply(this,arguments)}}())})()}cameraExperience(t,r,i){var n=this;return(0,d.A)(function*(){if(customElements.get("pwa-camera-modal")){const e=document.createElement("pwa-camera-modal");e.facingMode=t.direction===h.Front?"user":"environment",document.body.appendChild(e);try{yield e.componentOnReady(),e.addEventListener("onPhoto",function(){var a=(0,d.A)(function*(s){const o=s.detail;null===o?i(new u.I9("User cancelled photos app")):o instanceof Error?i(o):r(yield n._getCameraPhoto(o,t)),e.dismiss(),document.body.removeChild(e)});return function(s){return a.apply(this,arguments)}}()),e.present()}catch{n.fileInputExperience(t,r,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),n.fileInputExperience(t,r,i)})()}fileInputExperience(t,r,i){let n=document.querySelector("#_capacitor-camera-input");const e=()=>{var a;null===(a=n.parentNode)||void 0===a||a.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input",n.type="file",n.hidden=!0,document.body.appendChild(n),n.addEventListener("change",a=>{const s=n.files[0];let o="jpeg";if("image/png"===s.type?o="png":"image/gif"===s.type&&(o="gif"),"dataUrl"===t.resultType||"base64"===t.resultType){const p=new FileReader;p.addEventListener("load",()=>{if("dataUrl"===t.resultType)r({dataUrl:p.result,format:o});else if("base64"===t.resultType){const b=p.result.split(",")[1];r({base64String:b,format:o})}e()}),p.readAsDataURL(s)}else r({webPath:URL.createObjectURL(s),format:o}),e()}),n.addEventListener("cancel",a=>{i(new u.I9("User cancelled photos app")),e()})),n.accept="image/*",n.capture=!0,t.source===f.Photos||t.source===f.Prompt?n.removeAttribute("capture"):t.direction===h.Front?n.capture="user":t.direction===h.Rear&&(n.capture="environment"),n.click()}multipleFileInputExperience(t,r){let i=document.querySelector("#_capacitor-camera-input-multiple");const n=()=>{var e;null===(e=i.parentNode)||void 0===e||e.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",e=>{const a=[];for(let s=0;s<i.files.length;s++){const o=i.files[s];let p="jpeg";"image/png"===o.type?p="png":"image/gif"===o.type&&(p="gif"),a.push({webPath:URL.createObjectURL(o),format:p})}t({photos:a}),n()}),i.addEventListener("cancel",e=>{r(new u.I9("User cancelled photos app")),n()})),i.accept="image/*",i.click()}_getCameraPhoto(t,r){return new Promise((i,n)=>{const e=new FileReader,a=t.type.split("/")[1];"uri"===r.resultType?i({webPath:URL.createObjectURL(t),format:a,saved:!1}):(e.readAsDataURL(t),e.onloadend=()=>{const s=e.result;i("dataUrl"===r.resultType?{dataUrl:s,format:a,saved:!1}:{base64String:s.split(",")[1],format:a,saved:!1})},e.onerror=s=>{n(s)})})}checkPermissions(){var t=this;return(0,d.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw t.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw t.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var t=this;return(0,d.A)(function*(){throw t.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var t=this;return(0,d.A)(function*(){throw t.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var t=this;return(0,d.A)(function*(){throw t.unavailable("Not implemented on web.")})()}}new v;const L=(0,u.F3)("Camera",{web:()=>new v})},1889:(P,y,l)=>{l.d(y,{Wi:()=>d,__:()=>u});var u=function(c){return c.Documents="DOCUMENTS",c.Data="DATA",c.Library="LIBRARY",c.Cache="CACHE",c.External="EXTERNAL",c.ExternalStorage="EXTERNAL_STORAGE",c}(u||{}),d=function(c){return c.UTF8="utf8",c.ASCII="ascii",c.UTF16="utf16",c}(d||{})},1715:(P,y,l)=>{l.d(y,{j:()=>t});var u=l(467),d=l(7464),f=l(1889);const h=(0,d.F3)("Filesystem",{web:()=>l.e(2937).then(l.bind(l,2937)).then(r=>new r.FilesystemWeb)});var c=l(7691),v=l(4438);const g=(0,d.F3)("Preferences",{web:()=>l.e(2924).then(l.bind(l,2924)).then(r=>new r.PreferencesWeb)});let L=(()=>{var r;class i{constructor(){}setString(e,a){return(0,u.A)(function*(){yield g.set({key:e,value:a})})()}getString(e){return(0,u.A)(function*(){return yield g.get({key:e})})()}setObject(e,a){return(0,u.A)(function*(){yield g.set({key:e,value:JSON.stringify(a)})})()}getObject(e){return(0,u.A)(function*(){return yield g.get({key:e})})()}removeItem(e){return(0,u.A)(function*(){yield g.remove({key:e})})()}clear(){return(0,u.A)(function*(){yield g.clear()})()}}return(r=i).\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),i})();var m=l(3656);let t=(()=>{var r;class i{constructor(e,a){this.storage=e,this.platform=a,this.urlsList=[],this.pathList=[],this.loadSaved()}loadSaved(){var e=this;return(0,u.A)(function*(){const a=yield e.storage.getObject("paths");let s;e.pathList=JSON.parse(a.value)||[];for(let o of e.pathList)s=e.platform.is("hybrid")?d.Ii.convertFileSrc(o):`data:image/jpeg;base64,${(yield h.readFile({path:o,directory:f.__.Data})).data}`,e.urlsList.push(s)})()}getListaUrl(){return this.urlsList}takePhoto(){var e=this;return(0,u.A)(function*(){const a=yield c.i7.getPhoto({quality:90,allowEditing:!1,source:c.ru.Camera,resultType:c.LK.Base64});e.urlsList.push("data:image/jpeg;base64,"+a.base64String),e.savePhoto(a)})()}savePhoto(e){var a=this;return(0,u.A)(function*(){let s=e.base64String;const o=(new Date).getTime()+".jpeg",p=yield h.writeFile({path:o,data:s,directory:f.__.Data});let b;a.platform.is("hybrid")?(b=p.uri,console.log("Hybrid URI: "+p.uri)):(b=o,console.log("Navegador path: "+o)),a.pathList.push(b),a.storage.setObject("paths",a.pathList)})()}}return(r=i).\u0275fac=function(e){return new(e||r)(v.KVO(L),v.KVO(m.OD))},r.\u0275prov=v.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),i})()}}]);